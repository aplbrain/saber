{% extends "base.html" %}

{% block title %}Experiments{% endblock %}

{% block content %}
<div class="container">
	<table class="table table-bordered shadow-sm">
		<thead class="thead-light">
			<tr>
				<th>Experiment</th>
				<th>Creation Date</th>
				<th>Image Bucket</th>
				<th>Output Bucket</th>
				<th>Download Data CSV</th>
				<th>Remove</th>
			</tr>
		</thead>
		<tbody>
		{% for experiment in experiments %}
			<tr>
				<td>{{experiment["name"]}}</td>
				<td>{{experiment["date"]}}</td>
				<td>{{experiment["images_dir"]}}</td>
				<td>{{experiment["_saber_bucket"]}}</td>
				<td>
					<a href="/api/experiment/{{experiment['name']}}/download" class="btn btn-primary" download>Download</a>
				</td>	
				<td>
					<button type="button" class="btn btn-danger" data-toggle="modal" data-target="#modal_{{experiment['name']}}">
						Remove
					</button>
				</td>
			</tr>
		{% endfor %}
		</tbody>
	</table>
	{% for experiment in experiments %}
	<div class="modal fade" id="modal_{{experiment['name']}}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title">Delete {{experiment['name']}}</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
					<form action="/api/experiment/{{experiment['name']}}/delete", method="post">
						<button type="submit" class="btn btn-danger">Remove</button>
					</form>
				</div>
			</div>
		</div>
	</div>
	{% endfor %}
</div>
{% endblock %}
